---

// src/pages/index.astro
import Header from '../components/Header.jsx';
import AddToCart from '../components/AddToCart.jsx';
import FastCounter from '../components/FastCounter.svelte';
import { Image } from 'astro:assets';
import spaceImage from '../assets/spaceForAstro.jpg';
import SlowGuestbook from '../components/SlowGuestbook.jsx';
// import ImageUploader from '../components/ImageUploader.jsx';
import GuestbookForm from '../components/GuestbookForm.jsx';
import type { any } from 'astro:schema';

// 1. ì„œë²„ì—ì„œ ì™¸ë¶€ API í˜¸ì¶œ (await ë¥¼ ê·¸ëƒ¥ ì“¸ ìˆ˜ ìˆë‹¤. async ì•ˆ ë¶™ì—¬ë„ ë¨)
const response = await fetch('https://dummyjson.com/quotes/random');
const quoteData = await response.json();
// console.log(quoteData);
---
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Aerospace Shop</title>
  </head>
  	<style is:global>
		@import "tailwindcss";
		
		/* ë‹¤í¬ ëª¨ë“œ ë³€í˜•(Variant) í™œì„±í™” */
		@variant dark (&:where(.dark, .dark *));
	</style>
  <body class="bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 min-h-screen pt-20"> <!-- í—¤ë” ë†’ì´ë§Œí¼ pt-20 ì¤Œ -->
    
    <!-- 1. í—¤ë”: í•­ìƒ ìœ„ì— ë– ìˆìŒ -->
    <Header client:load />

	
    <main class="container mx-auto px-4">
		<div class="text-center my-10">
			<h2 class="text-3xl font-bold text-slate-800">ì‡¼í•‘ëª° ì˜ˆì œ</h2>
			<p class="text-slate-600">ì•„ë˜ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í—¤ë”ì˜ ìˆ«ìê°€ ë°”ë€ë‹ˆë‹¤.</p>
		</div>

		<div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-10">
			<!-- 2. ìƒí’ˆ ì¹´ë“œ -->
			<AddToCart client:load />

		<!-- ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš© í…ŒìŠ¤íŠ¸: í•˜ë‚˜ ë” ë†”ë´…ì‹œë‹¤ -->
			<!-- <div class="mt-10"></div>
			<AddToCart client:load /> -->

			<FastCounter client:visible />
		</div>


	  <!-- ì„œë²„ì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ë°”ë¡œ ë Œë”ë§ -->
		<div class="bg-gradient-to-br from-indigo-500 to-purple-600 p-8 rounded-2xl shadow-xl text-white transform hover:scale-105 transition-transform duration-300">
			<p class="text-xl font-serif italic leading-relaxed mb-4">
			"{quoteData.quote}"
			</p>
			<div class="flex justify-between items-center border-t border-white/20 pt-4">
			<span class="font-bold text-indigo-100">- {quoteData.author}</span>
			<span class="text-xs bg-white/20 px-2 py-1 rounded">ID: {quoteData.id}</span>
			</div>
		</div>
		
		<p class="text-center text-slate-400 text-sm mt-4">
			* ì´ ëª…ì–¸ì€ ì„œë²„ì—ì„œ ë¯¸ë¦¬ ê°€ì ¸ì™”ìœ¼ë¯€ë¡œ ë¡œë”©ì´ ì—†ìŠµë‹ˆë‹¤.
		</p>

		<div class="text-center mt-12 mb-20">
			<a href="/blog" class="inline-block px-8 py-4 bg-slate-900 text-white rounded-full font-bold hover:bg-slate-700 transition-colors shadow-lg">
				ë¸”ë¡œê·¸ êµ¬ê²½í•˜ëŸ¬ ê°€ê¸° â†’
			</a>
		</div>
		<div class="text-center mt-12 mb-20">
			<a href="/guestbook" class="inline-block px-8 py-4 bg-slate-900 text-white rounded-full font-bold hover:bg-slate-700 transition-colors shadow-lg">
				ë°©ëª…ë¡ êµ¬ê²½í•˜ëŸ¬ ê°€ê¸° â†’
			</a>
		</div>
		<!-- src/pages/index.astro íŒŒì¼ ë§¨ ì•„ë˜ìª½ì— ì¶”ê°€ -->

		<div class="text-center mt-20 p-10 border-t border-slate-200">
			<h3 class="text-xl font-bold mb-4">ğŸ§ª API í…ŒìŠ¤íŠ¸ ì‹¤í—˜ì‹¤</h3>
			<button id="load-api-btn" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition">
				APIë¡œ ìµœì‹  ë°©ëª…ë¡ 1ê°œ ëª°ë˜ ê°€ì ¸ì˜¤ê¸°
			</button>
			<pre id="api-result" class="mt-4 bg-slate-800 text-green-400 p-4 rounded-lg text-left text-xs hidden"></pre>
		</div>

		<script>
		// í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ìŠ¤í¬ë¦½íŠ¸ (ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ë¨)
		const btn = document.getElementById('load-api-btn');
		const resultBox = document.getElementById('api-result');

		btn?.addEventListener('click', async () => {
			try {
			// ë°©ê¸ˆ ë§Œë“  API í˜¸ì¶œ!
			const res = await fetch('/api/guestbook');
			const json = await res.json();
			
			// í™”ë©´ì— ë³´ì—¬ì£¼ê¸°
			if (resultBox) {
				resultBox.textContent = JSON.stringify(json.data[0], null, 2); // ì²« ë²ˆì§¸ ë°ì´í„°ë§Œ
				resultBox.classList.remove('hidden');
			}
			} catch (err) {
			alert('API í˜¸ì¶œ ì‹¤íŒ¨!');
			}
		});
		</script>

		<div class="w-full max-w-4xl mx-auto mb-12 rounded-2xl overflow-hidden shadow-2xl">
			<Image src={spaceImage}
					alt="ìš°ì£¼ ì´ë¯¸ì§€"
					width={1200}
					height={600}
					class="w-full h-auto object-cover hover:scale-105 transition-transform duration-700"
					loading={'eager'}/>
		</div>

		<!-- <ImageUploader client:load /> -->
		<!-- HTML í¼ ìˆë˜ ìë¦¬ì— ì´ê±° í•˜ë‚˜ë©´ ë! -->
		<GuestbookForm client:load />

		<div class="mt-20">
			<h2 class="text-2xl font-bold mb06 text-center">ìŠ¤íŠ¸ë¦¬ë° í…ŒìŠ¤íŠ¸ êµ¬ì—­</h2>

			<!-- client:visibleì„ ì£¼ë©´, ìŠ¤í¬ë¡¤í•´ì„œ ì´ ì»´í¬ë„ŒíŠ¸ê°€ ë³´ì¼ ë•Œ ë¡œë”©ì„ ì‹œì‘í•©ë‹ˆë‹¤ -->
  			<SlowGuestbook client:visible />	
		</div>


    </main>

  </body>
</html>